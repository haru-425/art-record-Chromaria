<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ğŸ¨ å…±æœ‰ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>ğŸ¨ å…±æœ‰ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆé›†</h1>
    <button id="reload">ğŸ”„ æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€</button>
  </header>
  <main>
    <div id="palettes">èª­ã¿è¾¼ã¿ä¸­...</div>
  </main>

  <script>
    async function loadPalettes() {
      const container = document.getElementById("palettes");
      container.textContent = "èª­ã¿è¾¼ã¿ä¸­...";
      try {
        const res = await fetch("palettes.json?" + Date.now());
        if (!res.ok) throw new Error("HTTPã‚¨ãƒ©ãƒ¼: " + res.status);
        const palettes = await res.json();
        container.innerHTML = "";
        palettes.forEach(p => {
          const div = document.createElement("div");
          div.className = "palette";
          div.innerHTML = `
            <h3>${p.name}</h3>
            <p>ğŸ‘¤ ${p.author || "åŒ¿å"}</p>
            <div class="colors">
              ${p.colors.map(c => `<div class="color" style="background:${c}" title="${c}">${c}</div>`).join("")}
            </div>
            <p class="desc">${p.description || ""}</p>
          `;
          container.appendChild(div);
        });

        // ã‚¯ãƒªãƒƒã‚¯ã§è‰²ã‚³ãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼
        document.querySelectorAll(".color").forEach(el => {
          el.onclick = () => {
            const color = el.textContent;
            navigator.clipboard.writeText(color);
            el.textContent = "ğŸ“‹";
            setTimeout(() => (el.textContent = color), 700);
          };
        });
      } catch (err) {
        container.textContent = "ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚";
        console.error("Fetchã‚¨ãƒ©ãƒ¼:", err);
      }
    }

    document.getElementById("reload").onclick = loadPalettes;
    loadPalettes();
  </script>
</body>
</html>
